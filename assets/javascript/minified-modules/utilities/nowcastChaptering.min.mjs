var nowcastChaptering;
nowcastChaptering=function(){var a=this;var h=function(b){var d=b.replace(a.corsProxy,"");console.log(d);a.fetchStatus('Fetching chapters from <a href="'+d+'" rel="noopener noreferrer">'+d+"</a>");a.fetchJson(b,function(c){var e;(null==c?0:null==(e=c.data)?0:e.chapters)&&0!==c.data.chapters.length?a.writeInfo(c.data.chapters,l):a.fetchProgress("<strong>Failure:</strong> No chapter info for this station",!1)})};var m=function(b,d){console.log(b);a.fetchStatus('Fetching headers from <a href="'+b+'" rel="noopener noreferrer">'+
b+"</a>");a.fetchJson(b,function(c){var e,g;if(null==c?0:null==(e=c.data)?0:null==(g=e.nowcast)?0:g.ott_stream_guid){var f,k;a.nowcastTitle=null==c?void 0:null==(f=c.data)?void 0:null==(k=f.nowcast)?void 0:k.program_title;h(d+c.data.nowcast.ott_stream_guid.toString(10))}else a.fetchProgress("<strong>Failure:</strong> Nowcast or <strong>ott_stream_guid</strong> missing for this station",!1)})};var n=function(b,d){console.log(b);a.fetchStatus('Fetching VOD GUID from <a href="'+b+'" rel="noopener noreferrer">'+
b+"</a>");a.fetchJson(b,function(c){(null==c?0:c.vod_guid)?(a.nowcastTitle=c.title,h(d+c.vod_guid)):a.fetchProgress("<strong>Failure:</strong> JSON or <strong>vod_guid</strong> missing for this station",!1)})};var l=function(b){var d,c,e,g;a.html+="<h3>"+(a.nowcastTitle||"No title")+"</h3>";a.html+="<div class=ul-belt>";a.html+=a.fieldsetControlsAndInfo();a.html+="<ul>";b.forEach(function(f){d=f.title||"No title";c=f.thumb||"https://placehold.co/200x113";e=f.title||"placeholder";g=f.title||"placeholder";
g=g.replace(/"/g,"");a.html+="<li>";a.html+="<hr>";a.html+="<h4>"+d+"</h4>";a.html+='<img src="'+c+'" alt="'+e+'" title="'+g+'" height=113 width=200>';a.html+="<p class=chapter-times>"+a.formatTime(f.in_ts)+" \u2013 "+a.formatTime(f.out_ts)+"</p>";a.html+="</li>"});a.html+="</ul>";a.html+="</div>"};a.utility="nowcast-chaptering";a.endpointSelectors();a.setListeners(function(){var b,d;a.utility="nowcast-chaptering";var c=null==(b=document.querySelector(a.dataUtility()+" .aws-url"))?void 0:b.href;b=
null==(d=document.querySelector(a.dataUtility()+" .chapters-url"))?void 0:d.href;var e;d=null==(e=document.querySelector(a.dataUtility()+" .header-url"))?void 0:e.href;c&&d&&b?(a.fetchProgress("Working . . . ",!0),a.intervalId=window.setInterval(a.fetchProgress,500,". ",!0),d.includes("htvkubeprod")?(b=b.replace(".com",".net"),b=a.corsProxy+b,n(c,b)):m(d,b)):a.fetchProgress("<strong>Failure:</strong> anchor HREFs could not be collected.",!1)})};export default Object.freeze({nowcastChaptering}); 
