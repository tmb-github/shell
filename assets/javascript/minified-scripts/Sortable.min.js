/**! * Sortable 1.13.0 * @author RubaXa <trash@rubaxa.org> * @author owenm <owen23355@gmail.com> * @license MIT */
(function(ma,N){"object"===typeof exports&&"undefined"!==typeof module?module.exports=N():"function"===typeof define&&define.amd?define(N):(ma=ma||self,ma.Sortable=N())})(this,function(){function ma(a){ma="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};return ma(a)}function N(){N=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=
arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};return N.apply(this,arguments)}function ha(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"===typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(e){return Object.getOwnPropertyDescriptor(c,e).enumerable})));d.forEach(function(e){var f=c[e];e in a?Object.defineProperty(a,e,{value:f,enumerable:!0,configurable:!0,
writable:!0}):a[e]=f})}return a}function Ob(a,b){if(null==a)return{};if(null==a)var c={};else{c={};var d=Object.keys(a),e;for(e=0;e<d.length;e++){var f=d[e];0<=b.indexOf(f)||(c[f]=a[f])}}if(Object.getOwnPropertySymbols)for(e=Object.getOwnPropertySymbols(a),f=0;f<e.length;f++)d=e[f],0<=b.indexOf(d)||Object.prototype.propertyIsEnumerable.call(a,d)&&(c[d]=a[d]);return c}function Pb(a){if(Array.isArray(a)){var b=0;for(var c=Array(a.length);b<a.length;b++)c[b]=a[b];b=c}else b=void 0;b||(b=Symbol.iterator in
Object(a)||"[object Arguments]"===Object.prototype.toString.call(a)?Array.from(a):void 0);if(!(a=b))throw new TypeError("Invalid attempt to spread non-iterable instance");return a}function ca(a,b){var c=function(d){return[a].includes(d.brand)};if("undefined"!==typeof window&&window.navigator)return navigator.userAgentData?0<navigator.userAgentData.brands.filter(c).length:!!navigator.userAgent.match(b)}function w(a,b,c){a.addEventListener(b,c,!da&&ub)}function v(a,b,c){a.removeEventListener(b,c,!da&&
ub)}function Na(a,b){if(b){">"===b[0]&&(b=b.substring(1));if(a)try{if(a.matches)return a.matches(b);if(a.msMatchesSelector)return a.msMatchesSelector(b);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(b)}catch(c){}return!1}}function Y(a,b,c,d){if(a){c=c||document;do{if(null!=b&&(">"===b[0]?a.parentNode===c&&Na(a,b):Na(a,b))||d&&a===c)return a;if(a===c)break}while(a=a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode)}return null}function D(a,b,c){if(a&&b)if(a.classList)a.classList[c?
"add":"remove"](b);else{var d=(" "+a.className+" ").replace(vb," ").replace(" "+b+" "," ");a.className=(d+(c?" "+b:"")).replace(vb," ")}a.hasAttribute("class")&&""===a.getAttribute("class")&&a.removeAttribute("class")}function n(a,b,c){var d=a&&a.style;if(d){if(void 0===c)return document.defaultView&&document.defaultView.getComputedStyle?c=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];b in d||-1!==b.indexOf("webkit")||(b="-webkit-"+b);d[b]=c+("string"===
typeof c?"":"px");a.hasAttribute("style")&&""===a.getAttribute("style")&&a.removeAttribute("style")}}function na(a,b){var c="";if("string"===typeof a)c=a;else{do{var d=n(a,"transform");d&&"none"!==d&&(c=d+" "+c)}while(!b&&(a=a.parentNode))}return(a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix)&&new a(c)}function wb(a,b,c){if(a){a=a.getElementsByTagName(b);b=0;var d=a.length;if(c)for(;b<d;b++)c(a[b],b);return a}return[]}function ea(){var a=document.scrollingElement;
return a?a:document.documentElement}function F(a,b,c,d,e){if(a.getBoundingClientRect||a===window){if(a!==window&&a.parentNode&&a!==ea()){var f=a.getBoundingClientRect();var g=f.top;var h=f.left;var k=f.bottom;var m=f.right;var p=f.height;var r=f.width}else h=g=0,k=window.innerHeight,m=window.innerWidth,p=window.innerHeight,r=window.innerWidth;if((b||c)&&a!==window&&(e=e||a.parentNode,!da)){do if(e&&e.getBoundingClientRect&&("none"!==n(e,"transform")||c&&"static"!==n(e,"position"))){k=e.getBoundingClientRect();
g-=k.top+parseInt(n(e,"border-top-width"));h-=k.left+parseInt(n(e,"border-left-width"));k=g+f.height;m=h+f.width;break}while(e=e.parentNode)}d&&a!==window&&(d=(a=na(e||a))&&a.a,e=a&&a.d,a&&(g/=e,h/=d,r/=d,p/=e,k=g+p,m=h+r));return{top:g,left:h,bottom:k,right:m,width:r,height:p}}}function xb(a,b,c){var d=ia(a,!0);for(a=F(a)[b];d;){b=F(d)[c];if(!("top"===c||"left"===c?a>=b:a<=b))return d;if(d===ea())break;d=ia(d,!1)}return!1}function Oa(a,b,c){for(var d=0,e=0,f=a.children;e<f.length;){if("none"!==f[e].style.display&&
f[e]!==q.ghost&&f[e]!==q.dragged&&Y(f[e],c.draggable,a,!1)){if(d===b)return f[e];d++}e++}return null}function cb(a,b){for(a=a.lastElementChild;a&&(a===q.ghost||"none"===n(a,"display")||b&&!Na(a,b));)a=a.previousElementSibling;return a||null}function G(a,b){var c=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)"TEMPLATE"===a.nodeName.toUpperCase()||a===q.clone||b&&!Na(a,b)||c++;return c}function yb(a){var b=0,c=0,d=ea();if(a){do{var e=na(a),f=e.d;b+=a.scrollLeft*e.a;c+=a.scrollTop*
f}while(a!==d&&(a=a.parentNode))}return[b,c]}function ia(a,b){if(!a||!a.getBoundingClientRect)return ea();var c=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var d=n(a);if(a.clientWidth<a.scrollWidth&&("auto"==d.overflowX||"scroll"==d.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==d.overflowY||"scroll"==d.overflowY)){if(!a.getBoundingClientRect||a===document.body)break;if(c||b)return a;c=!0}}while(a=a.parentNode);return ea()}function db(a,b){return Math.round(a.top)===
Math.round(b.top)&&Math.round(a.left)===Math.round(b.left)&&Math.round(a.height)===Math.round(b.height)&&Math.round(a.width)===Math.round(b.width)}function zb(a,b){return function(){if(!ya){var c=arguments;1===c.length?a.call(this,c[0]):a.apply(this,c);ya=setTimeout(function(){ya=void 0},b)}}}function Ab(a,b,c){a.scrollLeft+=b;a.scrollTop+=c}function eb(a){var b=window.Polymer,c=window.jQuery||window.Zepto;return b&&b.dom?b.dom(a).cloneNode(!0):c?c(a).clone(!0)[0]:a.cloneNode(!0)}function Bb(a,b){n(a,
"position","absolute");n(a,"top",b.top);n(a,"left",b.left);n(a,"width",b.width);n(a,"height",b.height)}function fb(a){n(a,"position","");n(a,"top","");n(a,"left","");n(a,"width","");n(a,"height","")}function Qb(){var a=[],b;return{captureAnimationState:function(){a=[];this.options.animation&&[].slice.call(this.el.children).forEach(function(c){if("none"!==n(c,"display")&&c!==q.ghost){a.push({target:c,rect:F(c)});var d=ha({},a[a.length-1].rect);if(c.thisAnimationDuration){var e=na(c,!0);e&&(d.top-=
e.f,d.left-=e.e)}c.fromRect=d}})},addAnimationState:function(c){a.push(c)},removeAnimationState:function(c){var d=a,e=d.splice;a:{var f=a;c={target:c};for(var g in f)if(f.hasOwnProperty(g))for(var h in c)if(c.hasOwnProperty(h)&&c[h]===f[g][h]){f=Number(g);break a}f=-1}e.call(d,f,1)},animateAll:function(c){var d=this;if(this.options.animation){var e=!1,f=0;a.forEach(function(g){var h=0,k=g.target,m=k.fromRect,p=F(k),r=k.prevFromRect,C=k.prevToRect;g=g.rect;var y=na(k,!0);y&&(p.top-=y.f,p.left-=y.e);
k.toRect=p;k.thisAnimationDuration&&db(r,p)&&!db(m,p)&&(g.top-p.top)/(g.left-p.left)===(m.top-p.top)/(m.left-p.left)&&(h=Math.sqrt(Math.pow(r.top-g.top,2)+Math.pow(r.left-g.left,2))/Math.sqrt(Math.pow(r.top-C.top,2)+Math.pow(r.left-C.left,2))*d.options.animation);db(p,m)||(k.prevFromRect=m,k.prevToRect=p,h||(h=d.options.animation),d.animate(k,g,p,h));h&&(e=!0,f=Math.max(f,h),clearTimeout(k.animationResetTimer),k.animationResetTimer=setTimeout(function(){k.animationTime=0;k.prevFromRect=null;k.fromRect=
null;k.prevToRect=null;k.thisAnimationDuration=null},h),k.thisAnimationDuration=h)});clearTimeout(b);e?b=setTimeout(function(){"function"===typeof c&&c()},f):"function"===typeof c&&c();a=[]}else clearTimeout(b),"function"===typeof c&&c()},animate:function(c,d,e,f){if(f){n(c,"transition","");n(c,"transform","");var g=na(this.el),h=(d.left-e.left)/(g&&g.a||1);d=(d.top-e.top)/(g&&g.d||1);c.animatingX=!!h;c.animatingY=!!d;n(c,"transform","translate3d("+h+"px,"+d+"px,0)");this.forRepaintDummy=c.offsetWidth;
n(c,"transition","transform "+f+"ms"+(this.options.easing?" "+this.options.easing:""));n(c,"transform","translate3d(0,0,0)");"number"===typeof c.animated&&clearTimeout(c.animated);c.animated=setTimeout(function(){n(c,"transition","");n(c,"transform","");c.animated=!1;c.animatingX=!1;c.animatingY=!1},f)}}}}function za(a){var b=a.sortable,c=a.rootEl,d=a.name,e=a.targetEl,f=a.cloneEl,g=a.toEl,h=a.fromEl,k=a.oldIndex,m=a.newIndex,p=a.oldDraggableIndex,r=a.newDraggableIndex,C=a.originalEvent,y=a.putSortable,
K=a.extraEventProperties;if(b=b||c&&c[O]){var x=b.options,Q="on"+d.charAt(0).toUpperCase()+d.substring(1);!window.CustomEvent||da||Aa?(a=document.createEvent("Event"),a.initEvent(d,!0,!0)):a=new CustomEvent(d,{bubbles:!0,cancelable:!0});a.to=g||c;a.from=h||c;a.item=e||c;a.clone=f;a.oldIndex=k;a.newIndex=m;a.oldDraggableIndex=p;a.newDraggableIndex=r;a.originalEvent=C;a.pullMode=y?y.lastPutMode:void 0;d=ha({},K,Ba.getEventProperties(d,b));for(var z in d)a[z]=d[z];c&&c.dispatchEvent(a);x[Q]&&x[Q].call(b,
a)}}function R(a){za(ha({putSortable:L,cloneEl:H,targetEl:l,rootEl:E,oldIndex:sa,oldDraggableIndex:Ca,newIndex:T,newDraggableIndex:ja},a))}function q(a,b){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a;this.options=b=N({},b);a[O]=this;var c={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Cb(a,
this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(f,g){f.setData("Text",g.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,
y:0},supportPointer:!1!==q.supportPointer&&"PointerEvent"in window&&!Da,emptyInsertThreshold:5};Ba.initializePlugins(this,a,c);for(var d in c)d in b||(b[d]=c[d]);Db(b);for(var e in this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this));if(this.nativeDraggable=b.forceFallback?!1:Rb)this.options.touchStartThreshold=1;b.supportPointer?w(a,"pointerdown",this._onTapStart):(w(a,"mousedown",this._onTapStart),w(a,"touchstart",this._onTapStart));this.nativeDraggable&&(w(a,"dragover",
this),w(a,"dragenter",this));Pa.push(this.el);b.store&&b.store.get&&this.sort(b.store.get(this)||[]);N(this,Qb())}function gb(a,b,c,d,e,f,g,h){var k=a[O],m=k.options.onMove,p;if(!window.CustomEvent||da||Aa){var r=document.createEvent("Event");r.initEvent("move",!0,!0)}else r=new CustomEvent("move",{bubbles:!0,cancelable:!0});r.to=b;r.from=a;r.dragged=c;r.draggedRect=d;r.related=e||b;r.relatedRect=f||F(b);r.willInsertAfter=h;r.originalEvent=g;a.dispatchEvent(r);m&&(p=m.call(k,r,g));return p}function hb(a){a.draggable=
!1}function Sb(){ib=!1}function Tb(a,b,c){c=F(cb(c.el,c.options.draggable));return b?a.clientX>c.right+10||a.clientX<=c.right&&a.clientY>c.bottom&&a.clientX>=c.left:a.clientX>c.right&&a.clientY>c.top||a.clientX<=c.right&&a.clientY>c.bottom+10}function Ub(a,b,c,d,e,f,g,h){a=d?a.clientY:a.clientX;var k=d?c.height:c.width,m=d?c.top:c.left;c=d?c.bottom:c.right;d=!1;if(!g)if(h&&Qa<k*e)if(!Ea&&(1===Fa?a>m+k*f/2:a<c-k*f/2)&&(Ea=!0),Ea)d=!0;else{if(1===Fa?a<m+Qa:a>c-Qa)return-Fa}else if(a>m+k*(1-e)/2&&a<
c-k*(1-e)/2)return b=G(l)<G(b)?1:-1,b;if(d||g)if(a<m+k*f/2||a>c-k*f/2)return a>m+k/2?1:-1;return 0}function Vb(a){Ra.length=0;a=a.getElementsByTagName("input");for(var b=a.length;b--;){var c=a[b];c.checked&&Ra.push(c)}}function Sa(a){return setTimeout(a,0)}function Ta(){I.forEach(function(a){clearInterval(a.pid)});I=[]}function jb(){}function kb(){}function Wb(a,b){t.forEach(function(c,d){(d=b.children[c.sortableIndex+(a?Number(d):0)])?b.insertBefore(c,d):b.appendChild(c)})}function Eb(a,b){U.forEach(function(c,
d){(d=b.children[c.sortableIndex+(a?Number(d):0)])?b.insertBefore(c,d):b.appendChild(c)})}function Ua(){t.forEach(function(a){a!==A&&a.parentNode&&a.parentNode.removeChild(a)})}var da=ca("MSIE",/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Aa=ca("Edge",/Edge/i),Fb=ca("Firefox",/firefox/i),Da=ca("Safari",/safari/i)&&!ca("Chrome",/chrome/i)&&!ca("Android",/android/i),Ga=ca("IOS",/iP(ad|od|hone)/i),Xb=ca("Chrome",/chrome/i)&&ca("Android",/android/i),ub={capture:!1,passive:!1},vb=/\s+/g,ya,
O="Sortable"+(new Date).getTime(),ta=[],lb={initializeByDefault:!0},Ba={mount:function(a){for(var b in lb)!lb.hasOwnProperty(b)||b in a||(a[b]=lb[b]);ta.forEach(function(c){if(c.pluginName===a.pluginName)throw"Sortable: Cannot mount plugin ".concat(a.pluginName," more than once");});ta.push(a)},pluginEvent:function(a,b,c){var d=this;this.eventCanceled=!1;c.cancel=function(){d.eventCanceled=!0};var e=a+"Global";ta.forEach(function(f){if(b[f.pluginName]){if(b[f.pluginName][e])b[f.pluginName][e](ha({sortable:b},
c));if(b.options[f.pluginName]&&b[f.pluginName][a])b[f.pluginName][a](ha({sortable:b},c))}})},initializePlugins:function(a,b,c,d){ta.forEach(function(f){var g=f.pluginName;if(a.options[g]||f.initializeByDefault)f=new f(a,b,a.options),f.sortable=a,f.options=a.options,a[g]=f,N(c,f.defaults)});for(var e in a.options)a.options.hasOwnProperty(e)&&(d=this.modifyOption(a,e,a.options[e]),"undefined"!==typeof d&&(a.options[e]=d))},getEventProperties:function(a,b){var c={};ta.forEach(function(d){"function"===
typeof d.eventProperties&&N(c,d.eventProperties.call(b[d.pluginName],a))});return c},modifyOption:function(a,b,c){var d;ta.forEach(function(e){a[e.pluginName]&&e.optionListeners&&"function"===typeof e.optionListeners[b]&&(d=e.optionListeners[b].call(a[e.pluginName],c))});return d}},S=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},d=c.evt;c=Ob(c,["evt"]);Ba.pluginEvent.bind(q)(a,b,ha({dragEl:l,parentEl:J,ghostEl:u,rootEl:E,nextEl:oa,lastDownEl:Va,cloneEl:H,cloneHidden:ka,
dragStarted:Ha,putSortable:L,activeSortable:q.active,originalEvent:d,oldIndex:sa,oldDraggableIndex:Ca,newIndex:T,newDraggableIndex:ja,hideGhostForTarget:Gb,unhideGhostForTarget:Hb,cloneNowHidden:function(){ka=!0},cloneNowShown:function(){ka=!1},dispatchSortableEvent:function(e){R({sortable:b,name:e,originalEvent:d})}},c))},l,J,u,E,oa,Va,H,ka,sa,T,Ca,ja,Wa,L,ua=!1,Xa=!1,Pa=[],pa,Z,mb,nb,Ib,Jb,Ha,va,Fa,Ea=!1,Ya=!1,Qa,P,ob=[],ib=!1,Ra=[],Za="undefined"!==typeof document,Kb=Aa||da?"cssFloat":"float",
Rb=Za&&!Xb&&!Ga&&"draggable"in document.createElement("div"),Lb=function(){if(Za){if(da)return!1;var a=document.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}}(),Cb=function(a,b){var c=n(a),d=parseInt(c.width)-parseInt(c.paddingLeft)-parseInt(c.paddingRight)-parseInt(c.borderLeftWidth)-parseInt(c.borderRightWidth),e=Oa(a,0,b);a=Oa(a,1,b);var f=e&&n(e);b=a&&n(a);var g=f&&parseInt(f.marginLeft)+parseInt(f.marginRight)+F(e).width,h=b&&parseInt(b.marginLeft)+
parseInt(b.marginRight)+F(a).width;return"flex"===c.display?"column"===c.flexDirection||"column-reverse"===c.flexDirection?"vertical":"horizontal":"grid"===c.display?1>=c.gridTemplateColumns.split(" ").length?"vertical":"horizontal":e&&f["float"]&&"none"!==f["float"]?(c="left"===f["float"]?"left":"right",!a||"both"!==b.clear&&b.clear!==c?"horizontal":"vertical"):e&&("block"===f.display||"flex"===f.display||"table"===f.display||"grid"===f.display||g>=d&&"none"===c[Kb]||a&&"none"===c[Kb]&&g+h>d)?"vertical":
"horizontal"},Yb=function(a,b,c){var d=c?a.left:a.top,e=c?a.right:a.bottom;a=c?a.width:a.height;var f=c?b.left:b.top,g=c?b.right:b.bottom;b=c?b.width:b.height;return d===f||e===g||d+a/2===f+b/2},Zb=function(a,b){var c;Pa.some(function(d){if(!cb(d)){var e=F(d),f=d[O].options.emptyInsertThreshold,g=a>=e.left-f&&a<=e.right+f;e=b>=e.top-f&&b<=e.bottom+f;if(f&&g&&e)return c=d}});return c},Db=function(a){function b(e,f){return function(g,h,k,m){var p=g.options.group.name&&h.options.group.name&&g.options.group.name===
h.options.group.name;if(null==e&&(f||p))return!0;if(null==e||!1===e)return!1;if(f&&"clone"===e)return e;if("function"===typeof e)return b(e(g,h,k,m),f)(g,h,k,m);g=(f?g:h).options.group.name;return!0===e||"string"===typeof e&&e===g||e.join&&-1<e.indexOf(g)}}var c={},d=a.group;d&&"object"==ma(d)||(d={name:d});c.name=d.name;c.checkPull=b(d.pull,!0);c.checkPut=b(d.put);c.revertClone=d.revertClone;a.group=c},Gb=function(){!Lb&&u&&n(u,"display","none")},Hb=function(){!Lb&&u&&n(u,"display","")};Za&&document.addEventListener("click",
function(a){if(Xa)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),Xa=!1},!0);var qa=function(a){if(l){a=a.touches?a.touches[0]:a;var b=Zb(a.clientX,a.clientY);if(b){var c={},d;for(d in a)a.hasOwnProperty(d)&&(c[d]=a[d]);c.target=c.rootEl=b;c.preventDefault=void 0;c.stopPropagation=void 0;b[O]._onDragOver(c)}}},$b=function(a){l&&l.parentNode[O]._isOutsideThisEl(a.target)};q.prototype={constructor:q,_isOutsideThisEl:function(a){this.el.contains(a)||
a===this.el||(va=null)},_getDirection:function(a,b){return"function"===typeof this.options.direction?this.options.direction.call(this,a,b,l):this.options.direction},_onTapStart:function(a){if(a.cancelable){var b=this,c=this.el,d=this.options,e=d.preventOnFilter,f=a.type,g=a.touches&&a.touches[0]||a.pointerType&&"touch"===a.pointerType&&a,h=(g||a).target,k=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||h,m=d.filter;Vb(c);if(!(l||/mousedown|pointerdown/.test(f)&&0!==
a.button||d.disabled||k.isContentEditable||!this.nativeDraggable&&Da&&h&&"SELECT"===h.tagName.toUpperCase()||(h=Y(h,d.draggable,c,!1),h&&h.animated||Va===h))){sa=G(h);Ca=G(h,d.draggable);if("function"===typeof m){if(m.call(this,a,h,this)){R({sortable:b,rootEl:k,name:"filter",targetEl:h,toEl:c,fromEl:c});S("filter",b,{evt:a});e&&a.cancelable&&a.preventDefault();return}}else if(m&&(m=m.split(",").some(function(p){if(p=Y(k,p.trim(),c,!1))return R({sortable:b,rootEl:p,name:"filter",targetEl:h,fromEl:c,
toEl:c}),S("filter",b,{evt:a}),!0}))){e&&a.cancelable&&a.preventDefault();return}d.handle&&!Y(k,d.handle,c,!1)||this._prepareDragStart(a,g,h)}}},_prepareDragStart:function(a,b,c){var d=this,e=d.el,f=d.options,g=e.ownerDocument;if(c&&!l&&c.parentNode===e){var h=F(c);E=e;l=c;J=l.parentNode;oa=l.nextSibling;Va=c;Wa=f.group;q.dragged=l;pa={target:l,clientX:(b||a).clientX,clientY:(b||a).clientY};Ib=pa.clientX-h.left;Jb=pa.clientY-h.top;this._lastX=(b||a).clientX;this._lastY=(b||a).clientY;l.style["will-change"]=
"all";c=function(){S("delayEnded",d,{evt:a});q.eventCanceled?d._onDrop():(d._disableDelayedDragEvents(),!Fb&&d.nativeDraggable&&(l.draggable=!0),d._triggerDragStart(a,b),R({sortable:d,name:"choose",originalEvent:a}),D(l,f.chosenClass,!0))};f.ignore.split(",").forEach(function(k){wb(l,k.trim(),hb)});w(g,"dragover",qa);w(g,"mousemove",qa);w(g,"touchmove",qa);w(g,"mouseup",d._onDrop);w(g,"touchend",d._onDrop);w(g,"touchcancel",d._onDrop);Fb&&this.nativeDraggable&&(this.options.touchStartThreshold=4,
l.draggable=!0);S("delayStart",this,{evt:a});!f.delay||f.delayOnTouchOnly&&!b||this.nativeDraggable&&(Aa||da)?c():q.eventCanceled?this._onDrop():(w(g,"mouseup",d._disableDelayedDrag),w(g,"touchend",d._disableDelayedDrag),w(g,"touchcancel",d._disableDelayedDrag),w(g,"mousemove",d._delayedDragTouchMoveHandler),w(g,"touchmove",d._delayedDragTouchMoveHandler),f.supportPointer&&w(g,"pointermove",d._delayedDragTouchMoveHandler),d._dragStartTimer=setTimeout(c,f.delay))}},_delayedDragTouchMoveHandler:function(a){a=
a.touches?a.touches[0]:a;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){l&&hb(l);clearTimeout(this._dragStartTimer);this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=this.el.ownerDocument;v(a,"mouseup",this._disableDelayedDrag);v(a,"touchend",this._disableDelayedDrag);v(a,"touchcancel",this._disableDelayedDrag);
v(a,"mousemove",this._delayedDragTouchMoveHandler);v(a,"touchmove",this._delayedDragTouchMoveHandler);v(a,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,b){b=b||"touch"==a.pointerType&&a;!this.nativeDraggable||b?this.options.supportPointer?w(document,"pointermove",this._onTouchMove):b?w(document,"touchmove",this._onTouchMove):w(document,"mousemove",this._onTouchMove):(w(l,"dragend",this),w(E,"dragstart",this._onDragStart));try{document.selection?Sa(function(){document.selection.empty()}):
window.getSelection().removeAllRanges()}catch(c){}},_dragStarted:function(a,b){ua=!1;if(E&&l){S("dragStarted",this,{evt:b});this.nativeDraggable&&w(document,"dragover",$b);var c=this.options;!a&&D(l,c.dragClass,!1);D(l,c.ghostClass,!0);q.active=this;a&&this._appendGhost();R({sortable:this,name:"start",originalEvent:b})}else this._nulling()},_emulateDragOver:function(){if(Z){this._lastX=Z.clientX;this._lastY=Z.clientY;Gb();for(var a=document.elementFromPoint(Z.clientX,Z.clientY),b=a;a&&a.shadowRoot;){a=
a.shadowRoot.elementFromPoint(Z.clientX,Z.clientY);if(a===b)break;b=a}l.parentNode[O]._isOutsideThisEl(a);if(b){do{if(b[O]&&b[O]._onDragOver({clientX:Z.clientX,clientY:Z.clientY,target:a,rootEl:b})&&!this.options.dragoverBubble)break;a=b}while(b=b.parentNode)}Hb()}},_onTouchMove:function(a){if(pa){var b=this.options,c=b.fallbackTolerance,d=b.fallbackOffset;b=a.touches?a.touches[0]:a;var e=u&&na(u,!0),f=u&&e&&e.a,g=u&&e&&e.d,h=Ga&&P&&yb(P);f=(b.clientX-pa.clientX+d.x)/(f||1)+(h?h[0]-ob[0]:0)/(f||1);
d=(b.clientY-pa.clientY+d.y)/(g||1)+(h?h[1]-ob[1]:0)/(g||1);if(!q.active&&!ua){if(c&&Math.max(Math.abs(b.clientX-this._lastX),Math.abs(b.clientY-this._lastY))<c)return;this._onDragStart(a,!0)}u&&(e?(e.e+=f-(mb||0),e.f+=d-(nb||0)):e={a:1,b:0,c:0,d:1,e:f,f:d},c="matrix(".concat(e.a,",").concat(e.b,",").concat(e.c,",").concat(e.d,",").concat(e.e,",").concat(e.f,")"),n(u,"webkitTransform",c),n(u,"mozTransform",c),n(u,"msTransform",c),n(u,"transform",c),mb=f,nb=d,Z=b);a.cancelable&&a.preventDefault()}},
_appendGhost:function(){if(!u){var a=this.options.fallbackOnBody?document.body:E,b=F(l,!0,Ga,!0,a),c=this.options;if(Ga){for(P=a;"static"===n(P,"position")&&"none"===n(P,"transform")&&P!==document;)P=P.parentNode;P!==document.body&&P!==document.documentElement?(P===document&&(P=ea()),b.top+=P.scrollTop,b.left+=P.scrollLeft):P=ea();ob=yb(P)}u=l.cloneNode(!0);D(u,c.ghostClass,!1);D(u,c.fallbackClass,!0);D(u,c.dragClass,!0);n(u,"transition","");n(u,"transform","");n(u,"box-sizing","border-box");n(u,
"margin",0);n(u,"top",b.top);n(u,"left",b.left);n(u,"width",b.width);n(u,"height",b.height);n(u,"opacity","0.8");n(u,"position",Ga?"absolute":"fixed");n(u,"zIndex","100000");n(u,"pointerEvents","none");q.ghost=u;a.appendChild(u);n(u,"transform-origin",Ib/parseInt(u.style.width)*100+"% "+Jb/parseInt(u.style.height)*100+"%")}},_onDragStart:function(a,b){var c=this,d=a.dataTransfer,e=c.options;S("dragStart",this,{evt:a});q.eventCanceled?this._onDrop():(S("setupClone",this),q.eventCanceled||(H=eb(l),
H.draggable=!1,H.style["will-change"]="",this._hideClone(),D(H,this.options.chosenClass,!1),q.clone=H),c.cloneId=Sa(function(){S("clone",c);q.eventCanceled||(c.options.removeCloneOnHide||E.insertBefore(H,l),c._hideClone(),R({sortable:c,name:"clone"}))}),!b&&D(l,e.dragClass,!0),b?(Xa=!0,c._loopId=setInterval(c._emulateDragOver,50)):(v(document,"mouseup",c._onDrop),v(document,"touchend",c._onDrop),v(document,"touchcancel",c._onDrop),d&&(d.effectAllowed="move",e.setData&&e.setData.call(c,d,l)),w(document,
"drop",c),n(l,"transform","translateZ(0)")),ua=!0,c._dragStartId=Sa(c._dragStarted.bind(c,b,a)),w(document,"selectstart",c),Ha=!0,Da&&n(document.body,"user-select","none"))},_onDragOver:function(a){function b(la,$a){S(la,x,ha({evt:a,isOwner:C,axis:z?"vertical":"horizontal",revert:k,dragRect:W,targetRect:h,canSort:y,fromSortable:K,target:g,completed:d,onMove:function(Mb,ac){return gb(E,f,l,W,Mb,F(Mb),a,ac)},changed:e},$a))}function c(){b("dragOverAnimationCapture");x.captureAnimationState();x!==K&&
K.captureAnimationState()}function d(la){b("dragOverCompleted",{insertion:la});la&&(C?r._hideClone():r._showClone(x),x!==K&&(D(l,L?L.options.ghostClass:r.options.ghostClass,!1),D(l,m.ghostClass,!0)),L!==x&&x!==q.active?L=x:x===q.active&&L&&(L=null),K===x&&(x._ignoreWhileAnimating=g),x.animateAll(function(){b("dragOverAnimationComplete");x._ignoreWhileAnimating=null}),x!==K&&(K.animateAll(),K._ignoreWhileAnimating=null));if(g===l&&!l.animated||g===f&&!g.animated)va=null;m.dragoverBubble||a.rootEl||
g===document||(l.parentNode[O]._isOutsideThisEl(a.target),!la&&qa(a));!m.dragoverBubble&&a.stopPropagation&&a.stopPropagation();return Q=!0}function e(){T=G(l);ja=G(l,m.draggable);R({sortable:x,name:"change",toEl:f,newIndex:T,newDraggableIndex:ja,originalEvent:a})}var f=this.el,g=a.target,h,k,m=this.options,p=m.group,r=q.active,C=Wa===p,y=m.sort,K=L||r,x=this,Q=!1;if(!ib){void 0!==a.preventDefault&&a.cancelable&&a.preventDefault();g=Y(g,m.draggable,f,!0);b("dragOver");if(q.eventCanceled)return Q;
if(l.contains(a.target)||g.animated&&g.animatingX&&g.animatingY||x._ignoreWhileAnimating===g)return d(!1);Xa=!1;if(r&&!m.disabled&&(C?y||(k=!E.contains(l)):L===this||(this.lastPutMode=Wa.checkPull(this,r,l,a))&&p.checkPut(this,r,l,a))){var z="vertical"===this._getDirection(a,g);var W=F(l);b("dragOverValid");if(q.eventCanceled)return Q;if(k)return J=E,c(),this._hideClone(),b("revert"),q.eventCanceled||(oa?E.insertBefore(l,oa):E.appendChild(l)),d(!0);p=cb(f,m.draggable);if(!p||Tb(a,z,this)&&!p.animated){if(p===
l)return d(!1);p&&f===a.target&&(g=p);g&&(h=F(g));if(!1!==gb(E,f,l,W,g,h,a,!!g))return c(),f.appendChild(l),J=f,e(),d(!0)}else if(g.parentNode===f){h=F(g);var M=0;M=l.parentNode!==f;var B=!Yb(l.animated&&l.toRect||W,g.animated&&g.toRect||h,z);p=z?"top":"left";var fa=xb(g,"top","top")||xb(l,"top","top"),Ia=fa?fa.scrollTop:void 0;if(va!==g){var Ja=h[p];Ea=!1;Ya=!B&&m.invertSwap||M}M=Ub(a,g,h,z,B?1:m.swapThreshold,null==m.invertedSwapThreshold?m.swapThreshold:m.invertedSwapThreshold,Ya,va===g);if(0!==
M){B=G(l);do{B-=M;var ba=J.children[B]}while(ba&&("none"===n(ba,"display")||ba===u))}if(0===M||ba===g)return d(!1);va=g;Fa=M;ba=g.nextElementSibling;B=!1;B=1===M;M=gb(E,f,l,W,g,h,a,B);if(!1!==M){if(1===M||-1===M)B=1===M;ib=!0;setTimeout(Sb,30);c();B&&!ba?f.appendChild(l):g.parentNode.insertBefore(l,B?ba:g);fa&&Ab(fa,0,Ia-fa.scrollTop);J=l.parentNode;void 0===Ja||Ya||(Qa=Math.abs(Ja-F(g)[p]));e();return d(!0)}}if(f.contains(l))return d(!1)}return!1}},_ignoreWhileAnimating:null,_offMoveEvents:function(){v(document,
"mousemove",this._onTouchMove);v(document,"touchmove",this._onTouchMove);v(document,"pointermove",this._onTouchMove);v(document,"dragover",qa);v(document,"mousemove",qa);v(document,"touchmove",qa)},_offUpEvents:function(){var a=this.el.ownerDocument;v(a,"mouseup",this._onDrop);v(a,"touchend",this._onDrop);v(a,"pointerup",this._onDrop);v(a,"touchcancel",this._onDrop);v(document,"selectstart",this)},_onDrop:function(a){var b=this.el,c=this.options;T=G(l);ja=G(l,c.draggable);S("drop",this,{evt:a});J=
l&&l.parentNode;T=G(l);ja=G(l,c.draggable);if(!q.eventCanceled&&(Ea=Ya=ua=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),clearTimeout(this.cloneId),clearTimeout(this._dragStartId),this.nativeDraggable&&(v(document,"drop",this),v(b,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Da&&n(document.body,"user-select",""),n(l,"transform",""),a&&(Ha&&(a.cancelable&&a.preventDefault(),!c.dropBubble&&a.stopPropagation()),u&&u.parentNode&&u.parentNode.removeChild(u),
(E===J||L&&"clone"!==L.lastPutMode)&&H&&H.parentNode&&H.parentNode.removeChild(H),l&&(this.nativeDraggable&&v(l,"dragend",this),hb(l),l.style["will-change"]="",Ha&&!ua&&D(l,L?L.options.ghostClass:this.options.ghostClass,!1),D(l,this.options.chosenClass,!1),R({sortable:this,name:"unchoose",toEl:J,newIndex:null,newDraggableIndex:null,originalEvent:a}),E!==J?(0<=T&&(R({rootEl:J,name:"add",toEl:J,fromEl:E,originalEvent:a}),R({sortable:this,name:"remove",toEl:J,originalEvent:a}),R({rootEl:J,name:"sort",
toEl:J,fromEl:E,originalEvent:a}),R({sortable:this,name:"sort",toEl:J,originalEvent:a})),L&&L.save()):T!==sa&&0<=T&&(R({sortable:this,name:"update",toEl:J,originalEvent:a}),R({sortable:this,name:"sort",toEl:J,originalEvent:a})),q.active)))){if(null==T||-1===T)T=sa,ja=Ca;R({sortable:this,name:"end",toEl:J,originalEvent:a});this.save()}this._nulling()},_nulling:function(){S("nulling",this);E=l=J=u=oa=H=Va=ka=pa=Z=Ha=T=ja=sa=Ca=va=Fa=L=Wa=q.dragged=q.ghost=q.clone=q.active=null;Ra.forEach(function(a){a.checked=
!0});Ra.length=mb=nb=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);break;case "dragenter":case "dragover":l&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault());break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a=[],b,c=this.el.children,d=0,e=c.length,f=this.options;d<e;d++)if(b=c[d],Y(b,f.draggable,this.el,!1)){var g=a,h=g.push,k;if(!(k=b.getAttribute(f.dataIdAttr))){b=b.tagName+b.className+
b.src+b.href+b.textContent;k=b.length;for(var m=0;k--;)m+=b.charCodeAt(k);k=m.toString(36)}h.call(g,k)}return a},sort:function(a,b){var c={},d=this.el;this.toArray().forEach(function(e,f){f=d.children[f];Y(f,this.options.draggable,d,!1)&&(c[e]=f)},this);b&&this.captureAnimationState();a.forEach(function(e){c[e]&&(d.removeChild(c[e]),d.appendChild(c[e]))});b&&this.animateAll()},save:function(){var a=this.options.store;a&&a.set&&a.set(this)},closest:function(a,b){return Y(a,b||this.options.draggable,
this.el,!1)},option:function(a,b){var c=this.options;if(void 0===b)return c[a];var d=Ba.modifyOption(this,a,b);c[a]="undefined"!==typeof d?d:b;"group"===a&&Db(c)},destroy:function(){S("destroy",this);var a=this.el;a[O]=null;v(a,"mousedown",this._onTapStart);v(a,"touchstart",this._onTapStart);v(a,"pointerdown",this._onTapStart);this.nativeDraggable&&(v(a,"dragover",this),v(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(b){b.removeAttribute("draggable")});
this._onDrop();this._disableDelayedDragEvents();Pa.splice(Pa.indexOf(this.el),1);this.el=a=null},_hideClone:function(){ka||(S("hideClone",this),q.eventCanceled||(n(H,"display","none"),this.options.removeCloneOnHide&&H.parentNode&&H.parentNode.removeChild(H),ka=!0))},_showClone:function(a){"clone"!==a.lastPutMode?this._hideClone():ka&&(S("showClone",this),q.eventCanceled||(l.parentNode!=E||this.options.group.revertClone?oa?E.insertBefore(H,oa):E.appendChild(H):E.insertBefore(H,l),this.options.group.revertClone&&
this.animate(l,H),n(H,"display",""),ka=!1))}};Za&&w(document,"touchmove",function(a){(q.active||ua)&&a.cancelable&&a.preventDefault()});q.utils={on:w,off:v,css:n,find:wb,is:function(a,b){return!!Y(a,b,a,!1)},extend:function(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},throttle:zb,closest:Y,toggleClass:D,clone:eb,index:G,nextTick:Sa,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:Cb,getChild:Oa};q.get=function(a){return a[O]};q.mount=function(){for(var a=
arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];b[0].constructor===Array&&(b=b[0]);b.forEach(function(d){if(!d.prototype||!d.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(d));d.utils&&(q.utils=ha({},q.utils,d.utils));Ba.mount(d)})};q.create=function(a,b){return new q(a,b)};q.version="1.13.0";var I=[],Ka,pb,qb=!1,rb,sb,ab,wa,tb=zb(function(a,b,c,d){if(b.scroll){var e=(a.touches?a.touches[0]:a).clientX,f=(a.touches?a.touches[0]:
a).clientY,g=b.scrollSensitivity,h=b.scrollSpeed,k=ea(),m=!1;if(pb!==c){pb=c;Ta();Ka=b.scroll;var p=b.scrollFn;!0===Ka&&(Ka=ia(c,!0))}c=0;var r=Ka;do{var C=r,y=F(C),K=y.top,x=y.bottom,Q=y.left,z=y.right,W=y.width;y=y.height;var M=void 0,B=void 0,fa=C.scrollWidth,Ia=C.scrollHeight;B=n(C);var Ja=C.scrollLeft,ba=C.scrollTop;C===k?(M=W<fa&&("auto"===B.overflowX||"scroll"===B.overflowX||"visible"===B.overflowX),B=y<Ia&&("auto"===B.overflowY||"scroll"===B.overflowY||"visible"===B.overflowY)):(M=W<fa&&("auto"===
B.overflowX||"scroll"===B.overflowX),B=y<Ia&&("auto"===B.overflowY||"scroll"===B.overflowY));Q=M&&(Math.abs(z-e)<=g&&Ja+W<fa)-(Math.abs(Q-e)<=g&&!!Ja);K=B&&(Math.abs(x-f)<=g&&ba+y<Ia)-(Math.abs(K-f)<=g&&!!ba);if(!I[c])for(x=0;x<=c;x++)I[x]||(I[x]={});if(I[c].vx!=Q||I[c].vy!=K||I[c].el!==C)if(I[c].el=C,I[c].vx=Q,I[c].vy=K,clearInterval(I[c].pid),0!=Q||0!=K)m=!0,I[c].pid=setInterval(function(){d&&0===this.layer&&q.active._onTouchMove(ab);var la=I[this.layer].vy?I[this.layer].vy*h:0,$a=I[this.layer].vx?
I[this.layer].vx*h:0;"function"===typeof p&&"continue"!==p.call(q.dragged.parentNode[O],$a,la,a,ab,I[this.layer].el)||Ab(I[this.layer].el,$a,la)}.bind({layer:c}),24);c++}while(b.bubbleScroll&&r!==k&&(r=ia(r,!1)));qb=m}},30),Nb=function(a){var b=a.originalEvent,c=a.putSortable,d=a.dragEl,e=a.activeSortable,f=a.dispatchSortableEvent,g=a.hideGhostForTarget;a=a.unhideGhostForTarget;b&&(e=c||e,g(),b=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:b,b=document.elementFromPoint(b.clientX,b.clientY),
a(),e&&!e.el.contains(b)&&(f("spill"),this.onSpill({dragEl:d,putSortable:c})))};jb.prototype={startIndex:null,dragStart:function(a){this.startIndex=a.oldDraggableIndex},onSpill:function(a){var b=a.dragEl;a=a.putSortable;this.sortable.captureAnimationState();a&&a.captureAnimationState();var c=Oa(this.sortable.el,this.startIndex,this.options);c?this.sortable.el.insertBefore(b,c):this.sortable.el.appendChild(b);this.sortable.animateAll();a&&a.animateAll()},drop:Nb};N(jb,{pluginName:"revertOnSpill"});
kb.prototype={onSpill:function(a){var b=a.dragEl;a=a.putSortable||this.sortable;a.captureAnimationState();b.parentNode&&b.parentNode.removeChild(b);a.animateAll()},drop:Nb};N(kb,{pluginName:"removeOnSpill"});var X,t=[],U=[],La,aa,Ma=!1,V=!1,xa=!1,A,ra,bb;q.mount(new function(){function a(){this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var b in this)"_"===b.charAt(0)&&"function"===typeof this[b]&&(this[b]=this[b].bind(this))}a.prototype={dragStarted:function(b){b=
b.originalEvent;this.sortable.nativeDraggable?w(document,"dragover",this._handleAutoScroll):this.options.supportPointer?w(document,"pointermove",this._handleFallbackAutoScroll):b.touches?w(document,"touchmove",this._handleFallbackAutoScroll):w(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(b){b=b.originalEvent;this.options.dragOverBubble||b.rootEl||this._handleAutoScroll(b)},drop:function(){this.sortable.nativeDraggable?v(document,"dragover",this._handleAutoScroll):
(v(document,"pointermove",this._handleFallbackAutoScroll),v(document,"touchmove",this._handleFallbackAutoScroll),v(document,"mousemove",this._handleFallbackAutoScroll));clearInterval(wa);Ta();clearTimeout(ya);ya=void 0},nulling:function(){ab=pb=Ka=qb=wa=rb=sb=null;I.length=0},_handleFallbackAutoScroll:function(b){this._handleAutoScroll(b,!0)},_handleAutoScroll:function(b,c){var d=this,e=(b.touches?b.touches[0]:b).clientX,f=(b.touches?b.touches[0]:b).clientY,g=document.elementFromPoint(e,f);ab=b;if(c||
Aa||da||Da){tb(b,this.options,g,c);var h=ia(g,!0);!qb||wa&&e===rb&&f===sb||(wa&&clearInterval(wa),wa=setInterval(function(){var k=ia(document.elementFromPoint(e,f),!0);k!==h&&(h=k,Ta());tb(b,d.options,k,c)},10),rb=e,sb=f)}else this.options.bubbleScroll&&ia(g,!0)!==ea()?tb(b,this.options,ia(g,!1),!1):Ta()}};return N(a,{pluginName:"scroll",initializeByDefault:!0})});q.mount(kb,jb);q.mount(new function(){function a(){this.defaults={swapClass:"sortable-swap-highlight"}}a.prototype={dragStart:function(b){X=
b.dragEl},dragOverValid:function(b){var c=b.completed,d=b.target,e=b.onMove,f=b.changed,g=b.cancel;if(b.activeSortable.options.swap){var h=this.sortable.el;b=this.options;d&&d!==h&&(h=X,!1!==e(d)?(D(d,b.swapClass,!0),X=d):X=null,h&&h!==X&&D(h,b.swapClass,!1));f();c(!0);g()}},drop:function(b){var c=b.activeSortable,d=b.putSortable;b=b.dragEl;var e=d||this.sortable,f=this.options;X&&D(X,f.swapClass,!1);if(X&&(f.swap||d&&d.options.swap)&&b!==X){e.captureAnimationState();e!==c&&c.captureAnimationState();
d=X;f=b.parentNode;var g=d.parentNode;if(f&&g&&!f.isEqualNode(d)&&!g.isEqualNode(b)){var h=G(b);var k=G(d);f.isEqualNode(g)&&h<k&&k++;f.insertBefore(d,f.children[h]);g.insertBefore(b,g.children[k])}e.animateAll();e!==c&&c.animateAll()}},nulling:function(){X=null}};return N(a,{pluginName:"swap",eventProperties:function(){return{swapItem:X}}})});q.mount(new function(){function a(b){for(var c in this)"_"===c.charAt(0)&&"function"===typeof this[c]&&(this[c]=this[c].bind(this));b.options.supportPointer?
w(document,"pointerup",this._deselectMultiDrag):(w(document,"mouseup",this._deselectMultiDrag),w(document,"touchend",this._deselectMultiDrag));w(document,"keydown",this._checkKeyDown);w(document,"keyup",this._checkKeyUp);this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(d,e){var f="";t.length&&aa===b?t.forEach(function(g,h){f+=(h?", ":"")+g.textContent}):f=e.textContent;d.setData("Text",f)}}}a.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(b){A=
b.dragEl},delayEnded:function(){this.isMultiDrag=~t.indexOf(A)},setupClone:function(b){var c=b.sortable;b=b.cancel;if(this.isMultiDrag){for(var d=0;d<t.length;d++)U.push(eb(t[d])),U[d].sortableIndex=t[d].sortableIndex,U[d].draggable=!1,U[d].style["will-change"]="",D(U[d],this.options.selectedClass,!1),t[d]===A&&D(U[d],this.options.chosenClass,!1);c._hideClone();b()}},clone:function(b){var c=b.sortable,d=b.rootEl,e=b.dispatchSortableEvent;b=b.cancel;this.isMultiDrag&&!this.options.removeCloneOnHide&&
t.length&&aa===c&&(Eb(!0,d),e("clone"),b())},showClone:function(b){var c=b.cloneNowShown,d=b.cancel;this.isMultiDrag&&(Eb(!1,b.rootEl),U.forEach(function(e){n(e,"display","")}),c(),bb=!1,d())},hideClone:function(b){var c=this,d=b.cloneNowHidden;b=b.cancel;this.isMultiDrag&&(U.forEach(function(e){n(e,"display","none");c.options.removeCloneOnHide&&e.parentNode&&e.parentNode.removeChild(e)}),d(),bb=!0,b())},dragStartGlobal:function(b){!this.isMultiDrag&&aa&&aa.multiDrag._deselectMultiDrag();t.forEach(function(c){c.sortableIndex=
G(c)});t=t.sort(function(c,d){return c.sortableIndex-d.sortableIndex});xa=!0},dragStarted:function(b){var c=this;b=b.sortable;if(this.isMultiDrag){if(this.options.sort&&(b.captureAnimationState(),this.options.animation)){t.forEach(function(e){e!==A&&n(e,"position","absolute")});var d=F(A,!1,!0,!0);t.forEach(function(e){e!==A&&Bb(e,d)});Ma=V=!0}b.animateAll(function(){Ma=V=!1;c.options.animation&&t.forEach(function(e){fb(e)});c.options.sort&&Ua()})}},dragOver:function(b){var c=b.target,d=b.completed;
b=b.cancel;V&&~t.indexOf(c)&&(d(!1),b())},revert:function(b){var c=b.fromSortable,d=b.rootEl,e=b.sortable,f=b.dragRect;1<t.length&&(t.forEach(function(g){e.addAnimationState({target:g,rect:V?F(g):f});fb(g);g.fromRect=f;c.removeAnimationState(g)}),V=!1,Wb(!this.options.removeCloneOnHide,d))},dragOverCompleted:function(b){var c=b.sortable,d=b.isOwner,e=b.activeSortable,f=b.parentEl,g=b.putSortable,h=this.options;if(b.insertion){d&&e._hideClone();Ma=!1;if(h.animation&&1<t.length&&(V||!d&&!e.options.sort&&
!g)){var k=F(A,!1,!0,!0);t.forEach(function(m){m!==A&&(Bb(m,k),f.appendChild(m))});V=!0}d||(V||Ua(),1<t.length?(b=bb,e._showClone(c),e.options.animation&&!bb&&b&&U.forEach(function(m){e.addAnimationState({target:m,rect:ra});m.fromRect=ra;m.thisAnimationDuration=null})):e._showClone(c))}},dragOverAnimationCapture:function(b){var c=b.dragRect,d=b.isOwner;b=b.activeSortable;t.forEach(function(e){e.thisAnimationDuration=null});b.options.animation&&!d&&b.multiDrag.isMultiDrag&&(ra=N({},c),c=na(A,!0),ra.top-=
c.f,ra.left-=c.e)},dragOverAnimationComplete:function(){V&&(V=!1,Ua())},drop:function(b){var c=b.originalEvent,d=b.rootEl,e=b.parentEl,f=b.sortable,g=b.dispatchSortableEvent,h=b.oldIndex,k=(b=b.putSortable)||this.sortable;if(c){var m=this.options,p=e.children;if(!xa)if(m.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),D(A,m.selectedClass,!~t.indexOf(A)),~t.indexOf(A))t.splice(t.indexOf(A),1),La=null,za({sortable:f,rootEl:d,name:"deselect",targetEl:A,originalEvt:c});else{t.push(A);
za({sortable:f,rootEl:d,name:"select",targetEl:A,originalEvt:c});if(c.shiftKey&&La&&f.el.contains(La)){var r=G(La),C=G(A);if(~r&&~C&&r!==C){if(C>r){var y=r;r=C}else y=C,r+=1;for(;y<r;y++)~t.indexOf(p[y])||(D(p[y],m.selectedClass,!0),t.push(p[y]),za({sortable:f,rootEl:d,name:"select",targetEl:p[y],originalEvt:c}))}}else La=A;aa=k}if(xa&&this.isMultiDrag){if((e[O].options.sort||e!==d)&&1<t.length){var K=F(A),x=G(A,":not(."+this.options.selectedClass+")");!Ma&&m.animation&&(A.thisAnimationDuration=null);
k.captureAnimationState();if(!Ma&&(m.animation&&(A.fromRect=K,t.forEach(function(z){z.thisAnimationDuration=null;if(z!==A){var W=V?F(z):K;z.fromRect=W;k.addAnimationState({target:z,rect:W})}})),Ua(),t.forEach(function(z){p[x]?e.insertBefore(z,p[x]):e.appendChild(z);x++}),h===G(A))){var Q=!1;t.forEach(function(z){z.sortableIndex!==G(z)&&(Q=!0)});Q&&g("update")}t.forEach(function(z){fb(z)});k.animateAll()}aa=k}(d===e||b&&"clone"!==b.lastPutMode)&&U.forEach(function(z){z.parentNode&&z.parentNode.removeChild(z)})}},
nullingGlobal:function(){this.isMultiDrag=xa=!1;U.length=0},destroyGlobal:function(){this._deselectMultiDrag();v(document,"pointerup",this._deselectMultiDrag);v(document,"mouseup",this._deselectMultiDrag);v(document,"touchend",this._deselectMultiDrag);v(document,"keydown",this._checkKeyDown);v(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(b){if(!("undefined"!==typeof xa&&xa||aa!==this.sortable||b&&Y(b.target,this.options.draggable,this.sortable.el,!1)||b&&0!==b.button))for(;t.length;){var c=
t[0];D(c,this.options.selectedClass,!1);t.shift();za({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:c,originalEvt:b})}},_checkKeyDown:function(b){b.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(b){b.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}};return N(a,{pluginName:"multiDrag",utils:{select:function(b){var c=b.parentNode[O];c&&c.options.multiDrag&&!~t.indexOf(b)&&(aa&&aa!==c&&(aa.multiDrag._deselectMultiDrag(),aa=c),D(b,
c.options.selectedClass,!0),t.push(b))},deselect:function(b){var c=b.parentNode[O],d=t.indexOf(b);c&&c.options.multiDrag&&~d&&(D(b,c.options.selectedClass,!1),t.splice(d,1))}},eventProperties:function(){var b=this,c=[],d=[];t.forEach(function(e){c.push({multiDragElement:e,index:e.sortableIndex});var f=V&&e!==A?-1:V?G(e,":not(."+b.options.selectedClass+")"):G(e);d.push({multiDragElement:e,index:f})});return{items:Pb(t),clones:[].concat(U),oldIndicies:c,newIndicies:d}},optionListeners:{multiDragKey:function(b){b=
b.toLowerCase();"ctrl"===b?b="Control":1<b.length&&(b=b.charAt(0).toUpperCase()+b.substring(1));return b}}})});return q});
